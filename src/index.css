@import "tailwindcss";
@config "../tailwind.config.js";

/* MesloLGS Nerd Font - bundled for terminal Unicode support */
@font-face {
  font-family: "MesloLGS NF";
  src: url("/fonts/MesloLGS-NF-Regular.ttf") format("truetype");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "MesloLGS NF";
  src: url("/fonts/MesloLGS-NF-Bold.ttf") format("truetype");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "MesloLGS NF";
  src: url("/fonts/MesloLGS-NF-Italic.ttf") format("truetype");
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: "MesloLGS NF";
  src: url("/fonts/MesloLGS-NF-BoldItalic.ttf") format("truetype");
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

@layer base {
  :root {
    --background: 250 20% 98%;
    --foreground: 250 30% 10%;
    --card: 0 0% 100%;
    --card-foreground: 250 30% 10%;
    --popover: 0 0% 100%;
    --popover-foreground: 250 30% 10%;
    --primary: 252 56% 52%;
    --primary-foreground: 0 0% 100%;
    --secondary: 250 20% 95%;
    --secondary-foreground: 250 30% 10%;
    --muted: 250 15% 94%;
    --muted-foreground: 250 10% 45%;
    --accent: 250 15% 94%;
    --accent-foreground: 250 30% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 100%;
    --border: 250 12% 85%;
    --input: 250 12% 85%;
    --ring: 252 56% 52%;
    --radius: 0.375rem;
    --panel-shadow: 0 1px 3px rgba(0,0,0,0.04), 0 4px 12px rgba(0,0,0,0.03);
    --nav-bg: 250 20% 97%;
  }

  .dark {
    --background: 250 12% 7%;
    --foreground: 0 0% 90%;
    --card: 250 10% 9%;
    --card-foreground: 0 0% 90%;
    --popover: 250 10% 9%;
    --popover-foreground: 0 0% 90%;
    --primary: 252 56% 57%;
    --primary-foreground: 0 0% 100%;
    --secondary: 250 8% 12%;
    --secondary-foreground: 0 0% 90%;
    --muted: 250 6% 15%;
    --muted-foreground: 0 0% 55%;
    --accent: 250 6% 15%;
    --accent-foreground: 0 0% 90%;
    --destructive: 0 62.8% 50%;
    --destructive-foreground: 0 0% 100%;
    --border: 250 6% 18%;
    --input: 250 6% 18%;
    --ring: 252 56% 57%;
    --panel-shadow: 8px 14px 36px rgba(0,0,0,0.35);
    --nav-bg: 0 0% 9%;
  }

  .tokyo {
    --background: 15 12% 8%;
    --foreground: 30 20% 90%;
    --card: 15 10% 10%;
    --card-foreground: 30 20% 90%;
    --popover: 15 10% 10%;
    --popover-foreground: 30 20% 90%;
    --primary: 24 90% 53%;
    --primary-foreground: 0 0% 100%;
    --secondary: 15 8% 14%;
    --secondary-foreground: 30 20% 90%;
    --muted: 15 6% 16%;
    --muted-foreground: 20 10% 55%;
    --accent: 15 6% 16%;
    --accent-foreground: 30 20% 90%;
    --destructive: 0 70% 55%;
    --destructive-foreground: 0 0% 100%;
    --border: 15 6% 19%;
    --input: 15 6% 19%;
    --ring: 24 90% 53%;
    --panel-shadow: 8px 14px 36px rgba(0,0,0,0.35);
    --nav-bg: 15 10% 10%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    @apply bg-background;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
  }

  body {
    @apply text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    overflow: hidden;
    animation: fadeIn 0.2s ease-out;
    height: 100vh;
    width: 100vw;
  }

  body {
    background: radial-gradient(ellipse at 30% 20%, hsl(var(--primary) / 0.03) 0%, hsl(var(--background)) 60%),
                hsl(var(--background));
  }

  #root {
    @apply bg-background;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
  }


  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes subtle-pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }

  @keyframes glow-pulse {
    0%, 100% {
      box-shadow: 0 0 0 0 hsl(var(--primary) / 0.2);
    }
    50% {
      box-shadow: 0 0 6px 1px hsl(var(--primary) / 0.1);
    }
  }
}

/* xterm.js styles */
.xterm {
  padding: 8px;
}

.xterm .xterm-viewport {
  overflow-y: auto;
}

.xterm .xterm-screen {
  padding: 4px;
}

/* Custom scrollbar for dark mode */
.dark ::-webkit-scrollbar,
.tokyo ::-webkit-scrollbar,
.custom ::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.dark ::-webkit-scrollbar-track,
.tokyo ::-webkit-scrollbar-track,
.custom ::-webkit-scrollbar-track {
  background: transparent;
}

.dark ::-webkit-scrollbar-thumb {
  background: hsl(250 10% 25%);
  border-radius: 3px;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: hsl(250 12% 35%);
}

.tokyo ::-webkit-scrollbar-thumb {
  background: hsl(15 10% 25%);
  border-radius: 3px;
}

.tokyo ::-webkit-scrollbar-thumb:hover {
  background: hsl(15 12% 35%);
}

.custom ::-webkit-scrollbar-thumb {
  background: hsl(var(--muted));
  border-radius: 3px;
}

.custom ::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground));
}

/* Prevent text selection in UI elements */
.no-select {
  user-select: none;
  -webkit-user-select: none;
}

/* Hide scrollbar but keep scroll functionality */
.scrollbar-none {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-none::-webkit-scrollbar {
  display: none;
}

/* Note card folded corner */
.note-fold::before {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  width: 14px;
  height: 14px;
  background: linear-gradient(
    225deg,
    hsl(var(--accent)) 50%,
    hsl(var(--border)) 50%
  );
  border-bottom-left-radius: 4px;
}

/* Section headers */
.section-header {
  @apply text-[11px] font-medium uppercase tracking-wider text-muted-foreground;
}

/* File status indicators */
.status-modified {
  @apply bg-primary;
}

.status-added {
  @apply bg-green-500;
}

.status-deleted {
  @apply bg-red-500;
}

/* Progress bars */
.progress-bar {
  @apply h-1 rounded-full bg-muted;
}

.progress-bar-fill {
  @apply h-full rounded-full transition-all duration-300;
}

.progress-bar-fill-orange {
  @apply bg-primary;
}

.progress-bar-fill-green {
  @apply bg-green-500;
}

/* Panel styling */
.panel {
  @apply bg-card border-border;
}

/* Monospace text */
.mono {
  font-family: 'SF Mono', 'Menlo', 'Monaco', 'Consolas', monospace;
}

/* AI suggestion card */
.ai-card {
  @apply border-l-2 border-l-primary bg-card;
  background: linear-gradient(to right, hsl(var(--primary) / 0.04), transparent 50%);
}

/* Tab styling overrides */
.tab-list {
  @apply bg-transparent border-b border-border;
}

.tab-trigger {
  @apply text-muted-foreground data-[state=active]:text-foreground data-[state=active]:border-b-2 data-[state=active]:border-primary;
}

.tab-scroll {
  overflow-x: auto;
  overflow-y: hidden;
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.tab-scroll::-webkit-scrollbar {
  display: none;
}

/* Prose styling for markdown preview - uses app CSS variables */
.prose {
  --tw-prose-body: hsl(var(--foreground));
  --tw-prose-headings: hsl(var(--foreground));
  --tw-prose-lead: hsl(var(--muted-foreground));
  --tw-prose-links: hsl(var(--primary));
  --tw-prose-bold: hsl(var(--foreground));
  --tw-prose-counters: hsl(var(--muted-foreground));
  --tw-prose-bullets: hsl(var(--muted-foreground));
  --tw-prose-hr: hsl(var(--border));
  --tw-prose-quotes: hsl(var(--foreground));
  --tw-prose-quote-borders: hsl(var(--border));
  --tw-prose-captions: hsl(var(--muted-foreground));
  --tw-prose-code: hsl(var(--foreground));
  --tw-prose-pre-code: hsl(var(--foreground));
  --tw-prose-pre-bg: hsl(var(--muted));
  --tw-prose-th-borders: hsl(var(--border));
  --tw-prose-td-borders: hsl(var(--border));
}

/* Monaco editor find widget - ensure it appears above everything and is clickable */
.monaco-editor .find-widget {
  z-index: 9999 !important;
}

.monaco-editor .find-widget,
.monaco-editor .find-widget * {
  pointer-events: auto !important;
}

.monaco-editor .find-widget .monaco-inputbox .input {
  background-color: hsl(var(--background)) !important;
  color: hsl(var(--foreground)) !important;
}

.monaco-editor .find-widget .button {
  background-color: transparent !important;
}

.monaco-editor .find-widget .button:hover {
  background-color: hsl(var(--muted)) !important;
}

/* Ensure overflow widgets container is above other elements */
.monaco-editor .overflowingContentWidgets {
  z-index: 9999 !important;
  pointer-events: auto !important;
}

/* ========================================
   ENHANCED DESIGN SYSTEM
   ======================================== */

/* Primary buttons */
.dark [data-slot="button"][data-variant="default"],
.tokyo [data-slot="button"][data-variant="default"],
.custom [data-slot="button"][data-variant="default"] {
  transition: all 0.15s ease;
}

.dark [data-slot="button"][data-variant="default"]:hover,
.tokyo [data-slot="button"][data-variant="default"]:hover,
.custom [data-slot="button"][data-variant="default"]:hover {
  filter: brightness(1.1);
}

.dark [data-slot="button"][data-variant="default"]:active,
.tokyo [data-slot="button"][data-variant="default"]:active,
.custom [data-slot="button"][data-variant="default"]:active {
  filter: brightness(0.95);
}

/* Input fields - minimal inner shadow */
.dark input:not([type="checkbox"]):not([type="radio"]),
.tokyo input:not([type="checkbox"]):not([type="radio"]),
.custom input:not([type="checkbox"]):not([type="radio"]),
.dark textarea,
.tokyo textarea,
.custom textarea {
  transition: box-shadow 0.2s ease, border-color 0.2s ease;
}

.dark input:not([type="checkbox"]):not([type="radio"]):not([data-no-focus-ring]):focus,
.tokyo input:not([type="checkbox"]):not([type="radio"]):not([data-no-focus-ring]):focus,
.custom input:not([type="checkbox"]):not([type="radio"]):not([data-no-focus-ring]):focus,
.dark textarea:focus,
.tokyo textarea:focus,
.custom textarea:focus {
  box-shadow: 0 0 0 2px hsl(var(--primary) / 0.2);
}

/* Diff view enhancements */
.dark .bg-green-500\/10,
.tokyo .bg-green-500\/10 {
  border-left: 2px solid rgb(34 197 94 / 0.4);
  margin-left: -2px;
  padding-left: 2px;
}

.dark .bg-red-500\/10,
.tokyo .bg-red-500\/10 {
  border-left: 2px solid rgb(239 68 68 / 0.4);
  margin-left: -2px;
  padding-left: 2px;
}

/* Dialog/modal backdrop */
.dark [data-slot="dialog-overlay"],
.tokyo [data-slot="dialog-overlay"],
.custom [data-slot="dialog-overlay"] {
  backdrop-filter: blur(12px);
}

/* Dialog content */
.dark [data-slot="dialog-content"],
.tokyo [data-slot="dialog-content"],
.custom [data-slot="dialog-content"] {
  box-shadow:
    0 24px 48px -12px hsl(0 0% 0% / 0.35),
    0 0 0 1px hsl(var(--border) / 0.5);
  border-radius: 1rem;
}

/* Tooltips */
.dark [data-slot="tooltip-content"],
.tokyo [data-slot="tooltip-content"],
.custom [data-slot="tooltip-content"] {
  box-shadow: 0 4px 12px hsl(0 0% 0% / 0.25);
  border-radius: 0.5rem;
}

/* Context menu / dropdown */
.dark [data-slot="context-menu-content"],
.tokyo [data-slot="context-menu-content"],
.custom [data-slot="context-menu-content"],
.dark [data-slot="dropdown-menu-content"],
.tokyo [data-slot="dropdown-menu-content"],
.custom [data-slot="dropdown-menu-content"] {
  box-shadow: 0 8px 24px hsl(0 0% 0% / 0.3);
  border-radius: 0.75rem;
}
